(function(){"use strict";var t={3390:function(t,e,n){var r=n(7195),i=function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"app"}},[e("ShortenForm")],1)},a=[],s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"container"},[e("div",{staticClass:"camera"},[e("video",{ref:"video",attrs:{autoplay:""}}),e("canvas",{ref:"canvas",staticStyle:{display:"none"}})]),e("div",{staticClass:"controls"},[e("input",{ref:"fileInput",attrs:{type:"file"},on:{change:t.handleFileChange}}),e("button",{attrs:{disabled:t.processing},on:{click:t.captureImage}},[e("span",[t._v(t._s(t.processing?"Thinking...":"Capture"))])])]),e("div",{staticClass:"output"},[e("div",{staticClass:"transcript"},[t._v(t._s(t.transcript))]),e("audio",{ref:"audio",attrs:{controls:"",src:t.audioSrc}})])])},o=[],c={data(){return{transcript:"",audioSrc:"",processing:!1}},mounted(){this.startCamera()},methods:{async startCamera(){const t={video:!0};try{const e=await navigator.mediaDevices.getUserMedia(t);this.$refs.video.srcObject=e}catch(e){console.error("Error accessing camera: ",e)}},handleFileChange(){const t=this.$refs.fileInput.files[0];if(t){this.processing=!0;const e=new FormData;e.append("file",t),this.sendImage(e)}},captureImage(){this.processing=!0,this.$refs.canvas.width=this.$refs.video.videoWidth,this.$refs.canvas.height=this.$refs.video.videoHeight,this.$refs.canvas.getContext("2d").drawImage(this.$refs.video,0,0),this.$refs.canvas.toBlob((t=>{const e=new FormData;e.append("file",t,"image.jpeg"),this.sendImage(e)}),"image/jpeg")},async sendImage(t){try{const e=await fetch("https://oyzekbotvh.execute-api.ap-northeast-1.amazonaws.com/prod/app/narration/123487",{method:"POST",body:t}),n=await e.json();console.log(n),this.transcript=n.response.transcript,this.audioSrc=n.response.audio_file,this.$nextTick((()=>{this.$refs.audio.play(),this.processing=!1}))}catch(e){console.error("Error sending image to server: ",e),this.processing=!1}}}},u=c,f=n(1001),p=(0,f.Z)(u,s,o,!1,null,"0fb56c9a",null),l=p.exports,d={name:"App",components:{ShortenForm:l}},h=d,v=(0,f.Z)(h,i,a,!1,null,null,null),g=v.exports;r.ZP.config.productionTip=!1,new r.ZP({render:t=>t(g)}).$mount("#app")}},e={};function n(r){var i=e[r];if(void 0!==i)return i.exports;var a=e[r]={exports:{}};return t[r].call(a.exports,a,a.exports,n),a.exports}n.m=t,function(){var t=[];n.O=function(e,r,i,a){if(!r){var s=1/0;for(f=0;f<t.length;f++){r=t[f][0],i=t[f][1],a=t[f][2];for(var o=!0,c=0;c<r.length;c++)(!1&a||s>=a)&&Object.keys(n.O).every((function(t){return n.O[t](r[c])}))?r.splice(c--,1):(o=!1,a<s&&(s=a));if(o){t.splice(f--,1);var u=i();void 0!==u&&(e=u)}}return e}a=a||0;for(var f=t.length;f>0&&t[f-1][2]>a;f--)t[f]=t[f-1];t[f]=[r,i,a]}}(),function(){n.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(e,{a:e}),e}}(),function(){n.d=function(t,e){for(var r in e)n.o(e,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){var t={143:0};n.O.j=function(e){return 0===t[e]};var e=function(e,r){var i,a,s=r[0],o=r[1],c=r[2],u=0;if(s.some((function(e){return 0!==t[e]}))){for(i in o)n.o(o,i)&&(n.m[i]=o[i]);if(c)var f=c(n)}for(e&&e(r);u<s.length;u++)a=s[u],n.o(t,a)&&t[a]&&t[a][0](),t[a]=0;return n.O(f)},r=self["webpackChunkFeed_Narration"]=self["webpackChunkFeed_Narration"]||[];r.forEach(e.bind(null,0)),r.push=e.bind(null,r.push.bind(r))}();var r=n.O(void 0,[998],(function(){return n(3390)}));r=n.O(r)})();
//# sourceMappingURL=app.bf7b3631.js.map